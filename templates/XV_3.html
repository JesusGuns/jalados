<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rompecabezas 4x4</title>
    <style>
body {
    font-family: Arial, sans-serif;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100vh;
    margin: 0;
    background-color: #f0f0f0;
}

h1 {
    text-align: center;
    margin-bottom: 20px;
}

#puzzle-container {
    display: grid;
    grid-template-columns: repeat(4, 100px);
    grid-template-rows: repeat(4, 100px);
    gap: 2px;
    margin-top: 20px;
}

.piece {
    width: 100px;
    height: 100px;
    background-size: 400px 400px;
    cursor: pointer;
    position: relative;
    border: 1px solid #ccc;
}

.piece.dragging {
    opacity: 0.5;
}

    </style>
</head>
<body>
    <div id="puzzle-container"></div>
    <script>
        const puzzleContainer = document.getElementById('puzzle-container');
const imageUrl = 'https://img.freepik.com/foto-gratis/chica-sonriente-tiro-medio-hermoso-vestido_52683-86468.jpg?t=st=1746555442~exp=1746559042~hmac=e8d5adc2117161bcd88377ab37d6e1358945489c42ac647e29fb996cf047ca4c&w=1800';
const puzzleSize = 4;
const pieceSize = 100;
let draggedPiece = null;
let initialPosition = {};

// Crear el rompecabezas
function createPuzzle() {
    const pieces = [];
    
    for (let row = 0; row < puzzleSize; row++) {
        for (let col = 0; col < puzzleSize; col++) {
            const piece = document.createElement('div');
            piece.classList.add('piece');
            piece.setAttribute('draggable', true);
            
            // Asignar la posici칩n del fondo de cada pieza
            piece.style.backgroundImage = `url(${imageUrl})`;
            piece.style.backgroundPosition = `-${col * pieceSize}px -${row * pieceSize}px`;
            piece.style.backgroundSize = `${puzzleSize * pieceSize}px ${puzzleSize * pieceSize}px`;
            piece.dataset.row = row;
            piece.dataset.col = col;

            piece.addEventListener('dragstart', dragStart);
            piece.addEventListener('dragover', dragOver);
            piece.addEventListener('drop', drop);
            piece.addEventListener('dragend', dragEnd);

            // Agregar eventos t치ctiles
            piece.addEventListener('touchstart', touchStart);
            piece.addEventListener('touchmove', touchMove);
            piece.addEventListener('touchend', touchEnd);

            pieces.push(piece);
            puzzleContainer.appendChild(piece);
        }
    }

    shufflePieces(pieces);
}

// Mezclar las piezas
function shufflePieces(pieces) {
    const shuffled = pieces.sort(() => Math.random() - 0.5);
    shuffled.forEach(piece => puzzleContainer.appendChild(piece));
}

// Funciones para drag & drop (rat칩n)
function dragStart(e) {
    draggedPiece = e.target;
    draggedPiece.classList.add('dragging');
}

function dragOver(e) {
    e.preventDefault();
}

function drop(e) {
    if (draggedPiece !== e.target) {
        swapPieces(draggedPiece, e.target);
    }
}

function dragEnd(e) {
    draggedPiece.classList.remove('dragging');
    draggedPiece = null;
}

// Funciones para touch events (pantallas t치ctiles)
function touchStart(e) {
    e.preventDefault();
    draggedPiece = e.target;
    initialPosition = { x: e.touches[0].clientX, y: e.touches[0].clientY };
    draggedPiece.classList.add('dragging');
}

function touchMove(e) {
    e.preventDefault();
    if (draggedPiece) {
        const deltaX = e.touches[0].clientX - initialPosition.x;
        const deltaY = e.touches[0].clientY - initialPosition.y;

        draggedPiece.style.transform = `translate(${deltaX}px, ${deltaY}px)`;
    }
}

function touchEnd(e) {
    e.preventDefault();
    if (draggedPiece) {
        const targetPiece = document.elementFromPoint(e.changedTouches[0].clientX, e.changedTouches[0].clientY);
        
        if (targetPiece && targetPiece !== draggedPiece && targetPiece.classList.contains('piece')) {
            swapPieces(draggedPiece, targetPiece);
        }

        draggedPiece.style.transform = '';
        draggedPiece.classList.remove('dragging');
        draggedPiece = null;
    }
}

// Intercambiar las piezas
function swapPieces(piece1, piece2) {
    const tempRow = piece1.dataset.row;
    const tempCol = piece1.dataset.col;
    
    piece1.dataset.row = piece2.dataset.row;
    piece1.dataset.col = piece2.dataset.col;
    
    piece2.dataset.row = tempRow;
    piece2.dataset.col = tempCol;

    const tempPosition = piece1.style.backgroundPosition;
    piece1.style.backgroundPosition = piece2.style.backgroundPosition;
    piece2.style.backgroundPosition = tempPosition;
}

// Iniciar el rompecabezas
createPuzzle();

    </script>
</body>
</html>
